<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificateur C-Secur360</title>
    <link rel="icon" type="image/png" href="C-Secur360-logo.png.png">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const PlanificateurApp = () => {
            const [jobs, setJobs] = useState([]);
            const [showModal, setShowModal] = useState(false);
            const [currentDate, setCurrentDate] = useState(new Date());
            
            // Personnel (vos données existantes)
            const personnel = [
                { id: 1, nom: "Éric Dufort", poste: "1.1 -TECH", succursale: "MDL - Sherbrooke" },
                { id: 2, nom: "Marc Tremblay", poste: "1.2 - ING.", succursale: "MDL - Terrebonne" },
                { id: 3, nom: "Sophie Martin", poste: "1.3 - CPI", succursale: "MDL - Québec" }
            ];
            
            // Sauvegarde locale
            useEffect(() => {
                const saved = localStorage.getItem('planificateur-jobs');
                if (saved) {
                    try {
                        setJobs(JSON.parse(saved));
                    } catch (error) {
                        console.log('Erreur chargement:', error);
                    }
                }
            }, []);
            
            useEffect(() => {
                localStorage.setItem('planificateur-jobs', JSON.stringify(jobs));
            }, [jobs]);
            
            const addJob = (jobData) => {
                const newJob = {
                    ...jobData,
                    id: Date.now(),
                    numeroJob: `JOB-${Date.now()}`
                };
                setJobs([...jobs, newJob]);
                setShowModal(false);
            };
            
            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                // Header avec logo
                React.createElement('div', { className: "bg-white shadow-sm border-b p-4" },
                    React.createElement('div', { className: "flex items-center justify-between" },
                        React.createElement('div', { className: "flex items-center gap-3" },
                            React.createElement('img', { 
                                src: "C-Secur360-logo.png.png", 
                                alt: "C-Secur360",
                                className: "w-10 h-10 object-contain"
                            }),
                            React.createElement('h1', { className: "text-xl font-bold text-gray-900" }, "Planificateur C-Secur360")
                        ),
                        React.createElement('button', {
                            onClick: () => setShowModal(true),
                            className: "px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        }, "➕ Nouveau Projet")
                    )
                ),
                
                // Contenu principal
                React.createElement('div', { className: "p-6" },
                    React.createElement('div', { className: "mb-6" },
                        React.createElement('h2', { className: "text-lg font-semibold mb-4" }, 
                            `Projets (${jobs.length})`
                        ),
                        
                        jobs.length === 0 ? 
                            React.createElement('div', { className: "text-center py-12" },
                                React.createElement('div', { className: "text-6xl mb-4" }, "📅"),
                                React.createElement('p', { className: "text-gray-500" }, "Aucun projet. Cliquez sur 'Nouveau Projet' pour commencer.")
                            ) :
                            React.createElement('div', { className: "grid gap-4" },
                                jobs.map(job => 
                                    React.createElement('div', {
                                        key: job.id,
                                        className: "bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow"
                                    },
                                        React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                            React.createElement('div', null,
                                                React.createElement('h3', { className: "text-lg font-semibold" }, job.nom || 'Projet sans nom'),
                                                React.createElement('p', { className: "text-sm text-gray-600" }, 
                                                    `${job.numeroJob} - ${job.client || 'Client non spécifié'}`
                                                )
                                            ),
                                            React.createElement('button', {
                                                onClick: () => setJobs(jobs.filter(j => j.id !== job.id)),
                                                className: "text-red-500 hover:text-red-700 p-1"
                                            }, "🗑️")
                                        ),
                                        React.createElement('div', { className: "grid grid-cols-2 gap-4 text-sm" },
                                            React.createElement('div', null,
                                                React.createElement('strong', null, "📅 Date: "),
                                                job.dateDebut || 'Non définie'
                                            ),
                                            React.createElement('div', null,
                                                React.createElement('strong', null, "📍 Lieu: "),
                                                job.lieu || 'Non spécifié'
                                            )
                                        )
                                    )
                                )
                            )
                    )
                ),
                
                // Modal nouveau projet
                showModal && React.createElement('div', { 
                    className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" 
                },
                    React.createElement('div', { className: "bg-white rounded-lg p-6 w-full max-w-md" },
                        React.createElement('h2', { className: "text-xl font-semibold mb-4" }, "Nouveau Projet"),
                        React.createElement(SimpleForm, { 
                            onSave: addJob, 
                            onCancel: () => setShowModal(false) 
                        })
                    )
                )
            );
        };
        
        const SimpleForm = ({ onSave, onCancel }) => {
            const [formData, setFormData] = useState({
                nom: '',
                client: '',
                dateDebut: '',
                lieu: ''
            });
            
            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.nom && formData.dateDebut) {
                    onSave(formData);
                }
            };
            
            return React.createElement('form', { onSubmit: handleSubmit },
                React.createElement('div', { className: "space-y-4" },
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Nom du projet *"),
                        React.createElement('input', {
                            type: "text",
                            value: formData.nom,
                            onChange: (e) => setFormData({...formData, nom: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                            required: true
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Client"),
                        React.createElement('input', {
                            type: "text",
                            value: formData.client,
                            onChange: (e) => setFormData({...formData, client: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Date début *"),
                        React.createElement('input', {
                            type: "date",
                            value: formData.dateDebut,
                            onChange: (e) => setFormData({...formData, dateDebut: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                            required: true
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Lieu"),
                        React.createElement('input', {
                            type: "text",
                            value: formData.lieu,
                            onChange: (e) => setFormData({...formData, lieu: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                        })
                    )
                ),
                React.createElement('div', { className: "flex justify-end gap-3 pt-6" },
                    React.createElement('button', {
                        type: "button",
                        onClick: onCancel,
                        className: "px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50"
                    }, "Annuler"),
                    React.createElement('button', {
                        type: "submit",
                        className: "px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                    }, "Créer")
                )
            );
        };

        ReactDOM.render(React.createElement(PlanificateurApp), document.getElementById('root'));
    </script>
</body>
</html>