<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificateur Job d'Huile - Version Complète</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* Gantt specific styles */
        .gantt-bar {
            position: absolute;
            height: 28px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 5;
        }

        .gantt-bar:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .resource-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 2px 8px;
            margin: 2px;
            font-size: 11px;
        }

        .available-resource {
            border-color: #10b981;
            background-color: #d1fae5;
            color: #047857;
        }

        .busy-resource {
            border-color: #ef4444;
            background-color: #fee2e2;
            color: #dc2626;
        }

        .selected-resource {
            border-color: #3b82f6;
            background-color: #dbeafe;
            color: #1d4ed8;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        /* Responsive optimizations */
        @media (max-width: 768px) {
            .gantt-bar {
                height: 24px;
                font-size: 10px;
            }
            
            .resource-badge {
                padding: 1px 6px;
                font-size: 10px;
            }

            .mobile-calendar-row {
                min-height: 60px;
            }

            .mobile-job-card {
                min-height: 50px;
                font-size: 11px;
            }

            .mobile-gantt-person {
                width: 140px;
                font-size: 11px;
            }

            .mobile-gantt-day {
                width: 40px;
                font-size: 9px;
            }
        }

        @media (max-width: 480px) {
            .gantt-bar {
                height: 20px;
                font-size: 9px;
            }

            .mobile-gantt-person {
                width: 120px;
                font-size: 10px;
            }

            .mobile-gantt-day {
                width: 32px;
                font-size: 8px;
            }
        }

        /* Touch-friendly interactions */
        @media (pointer: coarse) {
            .gantt-cell,
            .gantt-bar {
                min-height: 44px;
            }

            button {
                min-height: 44px;
                min-width: 44px;
            }
        }

        /* Animation pour les notifications */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification {
            animation: slideInRight 0.3s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback } = React;
        
        // ============== ICÔNES SVG ==============
        
        const Icon = ({ name, size = 20, className = '' }) => {
            const icons = {
                calendar: 'M3 4h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1zm1 4v12h16V8H4zm2-6v2h2V2h8v2h2V2a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2z',
                users: 'M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2h15zM8.5 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm8.5 3.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm2.5 8.5a3 3 0 0 0-3-3v2a1 1 0 0 1 1 1h2z',
                plus: 'M12 5v6m0 0v6m0-6h6m-6 0H6',
                edit: 'M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z',
                trash: 'M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m-6 5v6m4-6v6',
                x: 'M18 6L6 18M6 6l12 12',
                save: 'M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2zM17 21v-8H7v8M7 3v5h8',
                chevronLeft: 'M15 18l-6-6 6-6',
                chevronRight: 'M9 18l6-6-6-6',
                download: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3',
                upload: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12',
                search: 'M21 21l-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0z',
                barChart: 'M3 3v18h18M9 9l4 4 2-2 4 4',
                user: 'M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z',
                tool: 'M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z',
                building: 'M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18ZM6 12h4m4 0h4M6 16h4m4 0h4M6 8h4m4 0h4',
                settings: 'M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z',
                userPlus: 'M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M12.5 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM20 8v6M23 11h-6',
                check: 'M20 6L9 17l-5-5',
                clock: 'M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zM12 6v6l4 2',
                copy: 'M20 9H11a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2zM5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1',
                eye: 'M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z',
                filter: 'M22 3H2l8 9.46V19l4 2v-8.54L22 3z'
            };

            const path = icons[name] || icons.plus;
            
            return React.createElement('svg', {
                width: size,
                height: size,
                viewBox: '0 0 24 24',
                fill: 'none',
                stroke: 'currentColor',
                strokeWidth: 2,
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                className: className
            }, 
                React.createElement('path', { d: path })
            );
        };

        // ============== HOOK DÉTECTION D'ÉCRAN ==============
        
        const useScreenSize = () => {
            const [screenSize, setScreenSize] = useState({
                width: window.innerWidth,
                height: window.innerHeight,
                isMobile: window.innerWidth < 768,
                isTablet: window.innerWidth >= 768 && window.innerWidth < 1024,
                isDesktop: window.innerWidth >= 1024
            });

            useEffect(() => {
                const handleResize = () => {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    setScreenSize({
                        width,
                        height,
                        isMobile: width < 768,
                        isTablet: width >= 768 && width < 1024,
                        isDesktop: width >= 1024
                    });
                };

                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            return screenSize;
        };

        // ============== HOOK NOTIFICATIONS ==============
        
        const useNotifications = () => {
            const [notifications, setNotifications] = useState([]);

            const addNotification = useCallback((message, type = 'success') => {
                const id = Date.now();
                const notification = { id, message, type };
                setNotifications(prev => [...prev, notification]);
                
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== id));
                }, 3000);
            }, []);

            return { notifications, addNotification };
        };

        // ============== HOOK DONNÉES ==============
        
        const useAppData = () => {
            const [jobs, setJobs] = useState([]);
            const [personnel, setPersonnel] = useState([
                { id: 1, nom: "Éric Dufort", poste: "1.1 -TECH", succursale: "MDL - Sherbrooke", disponible: true, email: "eric@mdl.com", telephone: "450-123-4567", type: "interne" },
                { id: 2, nom: "Carl Lévesque", poste: "1.2 - ING.", succursale: "MDL - Terrebonne", disponible: true, email: "carl@mdl.com", telephone: "450-123-4568", type: "interne" },
                { id: 3, nom: "Miguel Morin", poste: "1.3 - CPI", succursale: "MDL - Québec", disponible: true, email: "miguel@mdl.com", telephone: "418-123-4567", type: "interne" },
                { id: 4, nom: "Chad Rodrigue", poste: "1.4 - COORD.", succursale: "DUAL - Sherbrooke", disponible: true, email: "chad@dual.com", telephone: "819-123-4567", type: "interne" },
                { id: 5, nom: "Alexandre Gariépy-Gauvin", poste: "1.5 - D.T.", succursale: "CFM - St-Jean-sur-le-Richelieu", disponible: true, email: "alex@cfm.com", telephone: "450-123-4569", type: "interne" }
            ]);

            const [equipements, setEquipements] = useState([
                { id: 1, nom: "DOBLE M4000", type: "Instrument", succursale: "MDL - Sherbrooke", disponible: true, numeroSerie: "DM4000-001", derniereMaintenance: "2025-08-15" },
                { id: 2, nom: "DOBLE SFRA", type: "Instrument", succursale: "MDL - Terrebonne", disponible: true, numeroSerie: "SFRA-002", derniereMaintenance: "2025-08-10" },
                { id: 3, nom: "TTR", type: "Test", succursale: "MDL - Québec", disponible: true, numeroSerie: "TTR-003", derniereMaintenance: "2025-07-20" },
                { id: 4, nom: "WINDING", type: "Bobinage", succursale: "DUAL - Sherbrooke", disponible: true, numeroSerie: "WIN-004", derniereMaintenance: "2025-08-01" }
            ]);

            const [sousTraitants, setSousTraitants] = useState([
                { id: 1, nom: "TechElec Solutions", specialite: "Maintenance préventive", telephone: "514-555-0001", email: "contact@techelec.com", disponible: true, tarif: "75$/h" },
                { id: 2, nom: "Électro Services Plus", specialite: "Diagnostic avancé", telephone: "450-555-0002", email: "info@electroplus.com", disponible: true, tarif: "85$/h" }
            ]);

            // Sauvegarde automatique
            useEffect(() => {
                const timer = setTimeout(() => {
                    localStorage.setItem('planificateur-data-v3', JSON.stringify({ 
                        jobs, personnel, equipements, sousTraitants
                    }));
                }, 1000);
                return () => clearTimeout(timer);
            }, [jobs, personnel, equipements, sousTraitants]);

            // Chargement des données
            useEffect(() => {
                const saved = localStorage.getItem('planificateur-data-v3');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        if (data.jobs) setJobs(data.jobs);
                        if (data.personnel) setPersonnel(data.personnel);
                        if (data.equipements) setEquipements(data.equipements);
                        if (data.sousTraitants) setSousTraitants(data.sousTraitants);
                    } catch (error) {
                        console.error('Erreur lors du chargement des données:', error);
                    }
                }
            }, []);

            return {
                jobs, setJobs,
                personnel, setPersonnel,
                equipements, setEquipements,
                sousTraitants, setSousTraitants
            };
        };

        // ============== COMPOSANTS UTILITAIRES ==============
        
        const Modal = ({ isOpen, onClose, title, children, size = "lg" }) => {
            if (!isOpen) return null;

            const sizeClasses = {
                sm: "max-w-md",
                lg: "max-w-2xl",
                xl: "max-w-4xl",
                full: "max-w-full mx-4"
            };

            return React.createElement('div', {
                className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",
                onClick: onClose
            },
                React.createElement('div', {
                    className: `bg-white rounded-lg shadow-xl ${sizeClasses[size]} w-full max-h-[90vh] overflow-hidden`,
                    onClick: (e) => e.stopPropagation()
                },
                    React.createElement('div', { className: "flex items-center justify-between p-4 border-b" },
                        React.createElement('h2', { className: "text-xl font-semibold" }, title),
                        React.createElement('button', {
                            onClick: onClose,
                            className: "p-2 hover:bg-gray-100 rounded-lg"
                        }, React.createElement(Icon, { name: 'x', size: 20 }))
                    ),
                    React.createElement('div', { className: "overflow-y-auto max-h-[calc(90vh-80px)]" }, children)
                )
            );
        };

        const NotificationContainer = ({ notifications }) => {
            return React.createElement('div', { 
                className: "fixed top-4 right-4 z-50 space-y-2" 
            },
                ...notifications.map(notification => 
                    React.createElement('div', {
                        key: notification.id,
                        className: `notification px-4 py-3 rounded-lg shadow-lg max-w-sm ${
                            notification.type === 'success' ? 'bg-green-500 text-white' :
                            notification.type === 'error' ? 'bg-red-500 text-white' :
                            'bg-blue-500 text-white'
                        }`
                    },
                        React.createElement('div', { className: "flex items-center gap-2" },
                            React.createElement(Icon, { 
                                name: notification.type === 'success' ? 'check' : 
                                     notification.type === 'error' ? 'x' : 'info', 
                                size: 16 
                            }),
                            React.createElement('span', { className: "text-sm" }, notification.message)
                        )
                    )
                )
            );
        };

        // ============== MODAL PERSONNEL ==============
        
        const PersonnelModal = ({ isOpen, onClose, onSave, personnel = null }) => {
            const [form, setForm] = useState({
                nom: '',
                poste: '1.1 -TECH',
                succursale: '',
                email: '',
                telephone: '',
                disponible: true,
                type: 'interne'
            });

            useEffect(() => {
                if (isOpen) {
                    if (personnel) {
                        setForm({ ...personnel });
                    } else {
                        setForm({
                            nom: '',
                            poste: '1.1 -TECH',
                            succursale: '',
                            email: '',
                            telephone: '',
                            disponible: true,
                            type: 'interne'
                        });
                    }
                }
            }, [isOpen, personnel]);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!form.nom || !form.poste) {
                    alert('Veuillez remplir les champs obligatoires');
                    return;
                }

                const personData = {
                    ...form,
                    id: personnel ? personnel.id : Date.now()
                };

                onSave(personData);
                onClose();
            };

            return React.createElement(Modal, {
                isOpen,
                onClose,
                title: personnel ? 'Modifier le Personnel' : 'Ajouter du Personnel',
                size: 'lg'
            },
                React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-4" },
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Nom complet *"),
                            React.createElement('input', {
                                type: "text",
                                value: form.nom,
                                onChange: (e) => setForm({...form, nom: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                required: true,
                                placeholder: "Ex: Jean Tremblay"
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Poste *"),
                            React.createElement('select', {
                                value: form.poste,
                                onChange: (e) => setForm({...form, poste: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                required: true
                            },
                                React.createElement('option', { value: "1.1 -TECH" }, "1.1 - TECH"),
                                React.createElement('option', { value: "1.2 - ING." }, "1.2 - ING."),
                                React.createElement('option', { value: "1.3 - CPI" }, "1.3 - CPI"),
                                React.createElement('option', { value: "1.4 - COORD." }, "1.4 - COORD."),
                                React.createElement('option', { value: "1.5 - D.T." }, "1.5 - D.T."),
                                React.createElement('option', { value: "2.1 - ADMIN" }, "2.1 - ADMIN")
                            )
                        )
                    ),

                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Succursale"),
                        React.createElement('input', {
                            type: "text",
                            value: form.succursale,
                            onChange: (e) => setForm({...form, succursale: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                            placeholder: "Ex: MDL - Sherbrooke"
                        })
                    ),

                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Email"),
                            React.createElement('input', {
                                type: "email",
                                value: form.email,
                                onChange: (e) => setForm({...form, email: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                placeholder: "jean@entreprise.com"
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Téléphone"),
                            React.createElement('input', {
                                type: "tel",
                                value: form.telephone,
                                onChange: (e) => setForm({...form, telephone: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                placeholder: "450-123-4567"
                            })
                        )
                    ),

                    React.createElement('div', { className: "flex items-center gap-4" },
                        React.createElement('label', { className: "flex items-center gap-2" },
                            React.createElement('input', {
                                type: "checkbox",
                                checked: form.disponible,
                                onChange: (e) => setForm({...form, disponible: e.target.checked}),
                                className: "rounded"
                            }),
                            React.createElement('span', { className: "text-sm" }, "Disponible")
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Type"),
                            React.createElement('select', {
                                value: form.type,
                                onChange: (e) => setForm({...form, type: e.target.value}),
                                className: "p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            },
                                React.createElement('option', { value: "interne" }, "Interne"),
                                React.createElement('option', { value: "contractuel" }, "Contractuel"),
                                React.createElement('option', { value: "stagiaire" }, "Stagiaire")
                            )
                        )
                    ),

                    React.createElement('div', { className: "flex justify-end gap-3 pt-4 border-t" },
                        React.createElement('button', {
                            type: "button",
                            onClick: onClose,
                            className: "px-6 py-2 border rounded-lg hover:bg-gray-50"
                        }, "Annuler"),
                        React.createElement('button', {
                            type: "submit",
                            className: "flex items-center gap-2 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        },
                            React.createElement(Icon, { name: 'save', size: 16 }),
                            personnel ? "Modifier" : "Ajouter"
                        )
                    )
                )
            );
        };

        // ============== MODAL ÉQUIPEMENT ==============
        
        const EquipementModal = ({ isOpen, onClose, onSave, equipement = null }) => {
            const [form, setForm] = useState({
                nom: '',
                type: 'Instrument',
                succursale: '',
                numeroSerie: '',
                derniereMaintenance: '',
                disponible: true
            });

            useEffect(() => {
                if (isOpen) {
                    if (equipement) {
                        setForm({ ...equipement });
                    } else {
                        setForm({
                            nom: '',
                            type: 'Instrument',
                            succursale: '',
                            numeroSerie: '',
                            derniereMaintenance: '',
                            disponible: true
                        });
                    }
                }
            }, [isOpen, equipement]);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!form.nom || !form.type) {
                    alert('Veuillez remplir les champs obligatoires');
                    return;
                }

                const equipData = {
                    ...form,
                    id: equipement ? equipement.id : Date.now()
                };

                onSave(equipData);
                onClose();
            };

            return React.createElement(Modal, {
                isOpen,
                onClose,
                title: equipement ? 'Modifier l\'Équipement' : 'Ajouter un Équipement',
                size: 'lg'
            },
                React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-4" },
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Nom de l'équipement *"),
                            React.createElement('input', {
                                type: "text",
                                value: form.nom,
                                onChange: (e) => setForm({...form, nom: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                required: true,
                                placeholder: "Ex: DOBLE M4000"
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Type *"),
                            React.createElement('select', {
                                value: form.type,
                                onChange: (e) => setForm({...form, type: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                required: true
                            },
                                React.createElement('option', { value: "Instrument" }, "Instrument"),
                                React.createElement('option', { value: "Test" }, "Test"),
                                React.createElement('option', { value: "Bobinage" }, "Bobinage"),
                                React.createElement('option', { value: "Analyseur" }, "Analyseur"),
                                React.createElement('option', { value: "Générateur" }, "Générateur"),
                                React.createElement('option', { value: "Mesure" }, "Mesure")
                            )
                        )
                    ),

                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Succursale"),
                        React.createElement('input', {
                            type: "text",
                            value: form.succursale,
                            onChange: (e) => setForm({...form, succursale: e.target.value}),
                            className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                            placeholder: "Ex: MDL - Sherbrooke"
                        })
                    ),

                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Numéro de série"),
                            React.createElement('input', {
                                type: "text",
                                value: form.numeroSerie,
                                onChange: (e) => setForm({...form, numeroSerie: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                placeholder: "Ex: DM4000-001"
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Dernière maintenance"),
                            React.createElement('input', {
                                type: "date",
                                value: form.derniereMaintenance,
                                onChange: (e) => setForm({...form, derniereMaintenance: e.target.value}),
                                className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                            })
                        )
                    ),

                    React.createElement('div', null,
                        React.createElement('label', { className: "flex items-center gap-2" },
                            React.createElement('input', {
                                type: "checkbox",
                                checked: form.disponible,
                                onChange: (e) => setForm({...form, disponible: e.target.checked}),
                                className: "rounded"
                            }),
                            React.createElement('span', { className: "text-sm" }, "Disponible")
                        )
                    ),

                    React.createElement('div', { className: "flex justify-end gap-3 pt-4 border-t" },
                        React.createElement('button', {
                            type: "button",
                            onClick: onClose,
                            className: "px-6 py-2 border rounded-lg hover:bg-gray-50"
                        }, "Annuler"),
                        React.createElement('button', {
                            type: "submit",
                            className: "flex items-center gap-2 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        },
                            React.createElement(Icon, { name: 'save', size: 16 }),
                            equipement ? "Modifier" : "Ajouter"
                        )
                    )
                )
            );
        };

        // ============== SÉLECTEUR DE RESSOURCES AVANCÉ ==============
        
        const ResourceSelector = ({ 
            selectedPersonnel = [], 
            selectedEquipements = [], 
            selectedSousTraitants = [],
            onPersonnelChange, 
            onEquipementsChange, 
            onSousTraitantsChange,
            personnel, 
            equipements, 
            sousTraitants,
            dateDebut,
            dateFin,
            jobs,
            currentJobId = null
        }) => {
            // Vérifier la disponibilité des ressources pour la période
            const isResourceAvailable = useCallback((resourceId, type) => {
                if (!dateDebut || !dateFin) return true;
                
                return !jobs.some(job => {
                    if (job.id === currentJobId) return false; // Ignorer le job actuel
                    
                    const jobStart = new Date(job.dateDebut);
                    const jobEnd = new Date(job.dateFin || job.dateDebut);
                    const periodStart = new Date(dateDebut);
                    const periodEnd = new Date(dateFin);
                    
                    const isOverlapping = jobStart <= periodEnd && jobEnd >= periodStart;
                    
                    if (!isOverlapping) return false;
                    
                    if (type === 'personnel') return job.personnel?.includes(resourceId);
                    if (type === 'equipement') return job.equipements?.includes(resourceId);
                    if (type === 'sousTraitant') return job.sousTraitants?.includes(resourceId);
                    
                    return false;
                });
            }, [dateDebut, dateFin, jobs, currentJobId]);

            const togglePersonnel = (id) => {
                const updated = selectedPersonnel.includes(id) 
                    ? selectedPersonnel.filter(p => p !== id)
                    : [...selectedPersonnel, id];
                onPersonnelChange(updated);
            };

            const toggleEquipement = (id) => {
                const updated = selectedEquipements.includes(id) 
                    ? selectedEquipements.filter(e => e !== id)
                    : [...selectedEquipements, id];
                onEquipementsChange(updated);
            };

            const toggleSousTraitant = (id) => {
                const updated = selectedSousTraitants.includes(id) 
                    ? selectedSousTraitants.filter(s => s !== id)
                    : [...selectedSousTraitants, id];
                onSousTraitantsChange(updated);
            };

            return React.createElement('div', { className: "space-y-6" },
                // Personnel
                React.createElement('div', null,
                    React.createElement('h3', { className: "text-lg font-semibold mb-3 flex items-center gap-2" },
                        React.createElement(Icon, { name: 'user', size: 20 }),
                        `Personnel (${selectedPersonnel.length} sélectionné${selectedPersonnel.length !== 1 ? 's' : ''})`
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-48 overflow-y-auto" },
                        ...personnel.map(person => {
                            const available = isResourceAvailable(person.id, 'personnel');
                            const selected = selectedPersonnel.includes(person.id);
                            
                            return React.createElement('div', {
                                key: person.id,
                                className: `p-3 border rounded-lg cursor-pointer transition-all ${
                                    selected ? 'selected-resource' : 
                                    available ? 'available-resource hover:shadow-md' : 
                                    'busy-resource opacity-60'
                                }`,
                                onClick: available ? () => togglePersonnel(person.id) : undefined
                            },
                                React.createElement('div', { className: "flex items-center justify-between" },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "font-medium text-sm" }, person.nom),
                                        React.createElement('div', { className: "text-xs text-gray-600" }, person.poste),
                                        React.createElement('div', { className: "text-xs text-gray-500" }, person.succursale)
                                    ),
                                    React.createElement('div', {
                                        className: `w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                                            selected ? 'bg-blue-500 border-blue-500' : 
                                            available ? 'border-green-400' : 'border-red-400'
                                        }`
                                    }, selected && React.createElement(Icon, { name: 'check', size: 12, className: "text-white" }))
                                ),
                                !available && React.createElement('div', { 
                                    className: "text-xs text-red-600 mt-1 font-medium" 
                                }, "⚠️ Non disponible pour cette période")
                            );
                        })
                    )
                ),

                // Équipements
                React.createElement('div', null,
                    React.createElement('h3', { className: "text-lg font-semibold mb-3 flex items-center gap-2" },
                        React.createElement(Icon, { name: 'tool', size: 20 }),
                        `Équipements (${selectedEquipements.length} sélectionné${selectedEquipements.length !== 1 ? 's' : ''})`
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-48 overflow-y-auto" },
                        ...equipements.map(equipement => {
                            const available = isResourceAvailable(equipement.id, 'equipement');
                            const selected = selectedEquipements.includes(equipement.id);
                            
                            return React.createElement('div', {
                                key: equipement.id,
                                className: `p-3 border rounded-lg cursor-pointer transition-all ${
                                    selected ? 'selected-resource' : 
                                    available ? 'available-resource hover:shadow-md' : 
                                    'busy-resource opacity-60'
                                }`,
                                onClick: available ? () => toggleEquipement(equipement.id) : undefined
                            },
                                React.createElement('div', { className: "flex items-center justify-between" },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "font-medium text-sm" }, equipement.nom),
                                        React.createElement('div', { className: "text-xs text-gray-600" }, equipement.type),
                                        React.createElement('div', { className: "text-xs text-gray-500" }, equipement.numeroSerie)
                                    ),
                                    React.createElement('div', {
                                        className: `w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                                            selected ? 'bg-blue-500 border-blue-500' : 
                                            available ? 'border-green-400' : 'border-red-400'
                                        }`
                                    }, selected && React.createElement(Icon, { name: 'check', size: 12, className: "text-white" }))
                                ),
                                !available && React.createElement('div', { 
                                    className: "text-xs text-red-600 mt-1 font-medium" 
                                }, "⚠️ Non disponible pour cette période")
                            );
                        })
                    )
                ),

                // Sous-traitants
                React.createElement('div', null,
                    React.createElement('h3', { className: "text-lg font-semibold mb-3 flex items-center gap-2" },
                        React.createElement(Icon, { name: 'building', size: 20 }),
                        `Sous-traitants (${selectedSousTraitants.length} sélectionné${selectedSousTraitants.length !== 1 ? 's' : ''})`
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-48 overflow-y-auto" },
                        ...sousTraitants.map(sousTraitant => {
                            const available = isResourceAvailable(sousTraitant.id, 'sousTraitant');
                            const selected = selectedSousTraitants.includes(sousTraitant.id);
                            
                            return React.createElement('div', {
                                key: sousTraitant.id,
                                className: `p-3 border rounded-lg cursor-pointer transition-all ${
                                    selected ? 'selected-resource' : 
                                    available ? 'available-resource hover:shadow-md' : 
                                    'busy-resource opacity-60'
                                }`,
                                onClick: available ? () => toggleSousTraitant(sousTraitant.id) : undefined
                            },
                                React.createElement('div', { className: "flex items-center justify-between" },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "font-medium text-sm" }, sousTraitant.nom),
                                        React.createElement('div', { className: "text-xs text-gray-600" }, sousTraitant.specialite),
                                        React.createElement('div', { className: "text-xs text-gray-500" }, sousTraitant.tarif)
                                    ),
                                    React.createElement('div', {
                                        className: `w-5 h-5 rounded-full border-2 flex items-center justify-center ${
                                            selected ? 'bg-blue-500 border-blue-500' : 
                                            available ? 'border-green-400' : 'border-red-400'
                                        }`
                                    }, selected && React.createElement(Icon, { name: 'check', size: 12, className: "text-white" }))
                                ),
                                !available && React.createElement('div', { 
                                    className: "text-xs text-red-600 mt-1 font-medium" 
                                }, "⚠️ Non disponible pour cette période")
                            );
                        })
                    )
                ),

                // Résumé de sélection
                (selectedPersonnel.length > 0 || selectedEquipements.length > 0 || selectedSousTraitants.length > 0) &&
                React.createElement('div', { className: "bg-blue-50 border border-blue-200 rounded-lg p-4" },
                    React.createElement('h4', { className: "font-semibold text-blue-900 mb-2" }, "Ressources sélectionnées :"),
                    React.createElement('div', { className: "flex flex-wrap gap-2" },
                        ...selectedPersonnel.map(id => {
                            const person = personnel.find(p => p.id === id);
                            return person && React.createElement('span', {
                                key: `p-${id}`,
                                className: "resource-badge selected-resource text-xs"
                            },
                                React.createElement(Icon, { name: 'user', size: 10 }),
                                person.nom
                            );
                        }),
                        ...selectedEquipements.map(id => {
                            const equipement = equipements.find(e => e.id === id);
                            return equipement && React.createElement('span', {
                                key: `e-${id}`,
                                className: "resource-badge selected-resource text-xs"
                            },
                                React.createElement(Icon, { name: 'tool', size: 10 }),
                                equipement.nom
                            );
                        }),
                        ...selectedSousTraitants.map(id => {
                            const sousTraitant = sousTraitants.find(s => s.id === id);
                            return sousTraitant && React.createElement('span', {
                                key: `s-${id}`,
                                className: "resource-badge selected-resource text-xs"
                            },
                                React.createElement(Icon, { name: 'building', size: 10 }),
                                sousTraitant.nom
                            );
                        })
                    )
                )
            );
        };

        // Suite dans la partie 2...
        // ============== MODAL JOB AVANCÉ ==============
        
        const JobModal = ({ 
            isOpen, 
            onClose, 
            job, 
            onSave, 
            onDelete,
            personnel,
            equipements,
            sousTraitants,
            jobs,
            selectedCell,
            addNotification
        }) => {
            const [formData, setFormData] = useState({
                numeroJob: '',
                nom: '',
                description: '',
                dateDebut: '',
                heureDebut: '08:00',
                dateFin: '',
                heureFin: '17:00',
                personnel: [],
                equipements: [],
                sousTraitants: [],
                lieu: '',
                priorite: 'normale',
                statut: 'planifie',
                client: '',
                budget: '',
                notes: ''
            });

            const [modificationMode, setModificationMode] = useState('groupe'); // 'groupe' ou 'individuel'

            // Générer un numéro de job automatique
            const generateJobNumber = useCallback(() => {
                const year = new Date().getFullYear();
                const month = String(new Date().getMonth() + 1).padStart(2, '0');
                const existingNumbers = jobs
                    .filter(j => j.numeroJob?.startsWith(`G${year.toString().slice(-2)}-${month}`))
                    .map(j => parseInt(j.numeroJob.split('-')[1]) || 0);
                const nextNumber = Math.max(0, ...existingNumbers) + 1;
                return `G${year.toString().slice(-2)}-${month}${String(nextNumber).padStart(2, '0')}`;
            }, [jobs]);

            // Initialiser le formulaire
            useEffect(() => {
                if (isOpen) {
                    if (job) {
                        setFormData({...job});
                        setModificationMode('groupe');
                    } else {
                        const today = new Date().toISOString().split('T')[0];
                        setFormData({
                            numeroJob: generateJobNumber(),
                            nom: '',
                            description: '',
                            dateDebut: selectedCell?.date || today,
                            heureDebut: '08:00',
                            dateFin: selectedCell?.date || today,
                            heureFin: '17:00',
                            personnel: selectedCell?.personnelId ? [selectedCell.personnelId] : [],
                            equipements: [],
                            sousTraitants: [],
                            lieu: '',
                            priorite: 'normale',
                            statut: 'planifie',
                            client: '',
                            budget: '',
                            notes: ''
                        });
                        setModificationMode('groupe');
                    }
                }
            }, [isOpen, job, generateJobNumber, selectedCell]);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.numeroJob || !formData.nom || !formData.dateDebut) {
                    addNotification('Veuillez remplir les champs obligatoires', 'error');
                    return;
                }

                if (formData.personnel.length === 0 && formData.sousTraitants.length === 0) {
                    addNotification('Veuillez assigner au moins une personne ou un sous-traitant', 'error');
                    return;
                }

                const jobData = {
                    ...formData,
                    id: job ? job.id : Date.now(),
                    dateCreation: job ? job.dateCreation : new Date().toISOString(),
                    dateModification: new Date().toISOString()
                };

                onSave(jobData);
                addNotification(
                    job ? 'Job modifié avec succès' : 'Job créé avec succès', 
                    'success'
                );
                onClose();
            };

            const updateField = (field, value) => {
                setFormData(prev => ({
                    ...prev,
                    [field]: value
                }));
            };

            const getPriorityColor = (priorite) => {
                switch (priorite) {
                    case 'urgent': return 'border-red-500 bg-red-50';
                    case 'haute': return 'border-orange-500 bg-orange-50';
                    case 'normale': return 'border-blue-500 bg-blue-50';
                    case 'faible': return 'border-gray-500 bg-gray-50';
                    default: return 'border-blue-500 bg-blue-50';
                }
            };

            const copyJob = () => {
                const newJobData = {
                    ...formData,
                    numeroJob: generateJobNumber(),
                    id: Date.now(),
                    dateCreation: new Date().toISOString(),
                    nom: formData.nom + ' (Copie)'
                };
                
                onSave(newJobData);
                addNotification('Job copié avec succès', 'success');
                onClose();
            };

            if (!isOpen) return null;

            return React.createElement(Modal, {
                isOpen,
                onClose,
                title: job ? 'Modifier le Job' : 'Nouveau Job',
                size: 'xl'
            },
                React.createElement('form', { onSubmit: handleSubmit, className: "p-6 space-y-6" },
                    // Mode de modification pour les jobs existants
                    job && React.createElement('div', { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-4" },
                        React.createElement('h4', { className: "font-semibold text-yellow-800 mb-2" }, "Mode de modification :"),
                        React.createElement('div', { className: "flex gap-4" },
                            React.createElement('label', { className: "flex items-center gap-2" },
                                React.createElement('input', {
                                    type: "radio",
                                    name: "modificationMode",
                                    value: "groupe",
                                    checked: modificationMode === 'groupe',
                                    onChange: (e) => setModificationMode(e.target.value)
                                }),
                                React.createElement('span', { className: "text-sm" }, "Modifier pour tout le groupe assigné")
                            ),
                            React.createElement('label', { className: "flex items-center gap-2" },
                                React.createElement('input', {
                                    type: "radio",
                                    name: "modificationMode",
                                    value: "individuel",
                                    checked: modificationMode === 'individuel',
                                    onChange: (e) => setModificationMode(e.target.value)
                                }),
                                React.createElement('span', { className: "text-sm" }, "Créer une version individuelle")
                            )
                        ),
                        modificationMode === 'individuel' && React.createElement('div', { 
                            className: "text-xs text-yellow-700 mt-2" 
                        }, "ℹ️ Un nouveau job sera créé avec les mêmes paramètres mais pour une seule personne.")
                    ),

                    // Informations de base
                    React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-2 gap-6" },
                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('h3', { className: "text-lg font-semibold border-b pb-2" }, "Informations de base"),
                            
                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Numéro de Job *"),
                                React.createElement('input', {
                                    type: "text",
                                    value: formData.numeroJob,
                                    onChange: (e) => updateField('numeroJob', e.target.value),
                                    className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                    required: true
                                })
                            ),

                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Nom du Job *"),
                                React.createElement('input', {
                                    type: "text",
                                    value: formData.nom,
                                    onChange: (e) => updateField('nom', e.target.value),
                                    className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                    required: true
                                })
                            ),

                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Description"),
                                React.createElement('textarea', {
                                    value: formData.description,
                                    onChange: (e) => updateField('description', e.target.value),
                                    className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                    rows: 3
                                })
                            ),

                            React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Client"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: formData.client,
                                        onChange: (e) => updateField('client', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Budget"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: formData.budget,
                                        onChange: (e) => updateField('budget', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                        placeholder: "Ex: 5000$"
                                    })
                                )
                            ),

                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Lieu"),
                                React.createElement('input', {
                                    type: "text",
                                    value: formData.lieu,
                                    onChange: (e) => updateField('lieu', e.target.value),
                                    className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                })
                            )
                        ),

                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('h3', { className: "text-lg font-semibold border-b pb-2" }, "Planification"),
                            
                            React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Date début *"),
                                    React.createElement('input', {
                                        type: "date",
                                        value: formData.dateDebut,
                                        onChange: (e) => updateField('dateDebut', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                        required: true
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Heure début"),
                                    React.createElement('input', {
                                        type: "time",
                                        value: formData.heureDebut,
                                        onChange: (e) => updateField('heureDebut', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    })
                                )
                            ),

                            React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Date fin"),
                                    React.createElement('input', {
                                        type: "date",
                                        value: formData.dateFin,
                                        onChange: (e) => updateField('dateFin', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Heure fin"),
                                    React.createElement('input', {
                                        type: "time",
                                        value: formData.heureFin,
                                        onChange: (e) => updateField('heureFin', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    })
                                )
                            ),

                            React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Priorité"),
                                    React.createElement('select', {
                                        value: formData.priorite,
                                        onChange: (e) => updateField('priorite', e.target.value),
                                        className: `w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${getPriorityColor(formData.priorite)}`
                                    },
                                        React.createElement('option', { value: "faible" }, "Faible"),
                                        React.createElement('option', { value: "normale" }, "Normale"),
                                        React.createElement('option', { value: "haute" }, "Haute"),
                                        React.createElement('option', { value: "urgent" }, "Urgent")
                                    )
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Statut"),
                                    React.createElement('select', {
                                        value: formData.statut,
                                        onChange: (e) => updateField('statut', e.target.value),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    },
                                        React.createElement('option', { value: "planifie" }, "Planifié"),
                                        React.createElement('option', { value: "en_cours" }, "En cours"),
                                        React.createElement('option', { value: "termine" }, "Terminé"),
                                        React.createElement('option', { value: "annule" }, "Annulé"),
                                        React.createElement('option', { value: "reporte" }, "Reporté")
                                    )
                                )
                            ),

                            React.createElement('div', null,
                                React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Notes"),
                                React.createElement('textarea', {
                                    value: formData.notes,
                                    onChange: (e) => updateField('notes', e.target.value),
                                    className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                    rows: 3,
                                    placeholder: "Notes supplémentaires..."
                                })
                            )
                        )
                    ),

                    // Sélection des ressources
                    React.createElement('div', null,
                        React.createElement('h3', { className: "text-lg font-semibold mb-4" }, "Assignation des ressources"),
                        React.createElement(ResourceSelector, {
                            selectedPersonnel: formData.personnel,
                            selectedEquipements: formData.equipements,
                            selectedSousTraitants: formData.sousTraitants,
                            onPersonnelChange: (personnel) => updateField('personnel', personnel),
                            onEquipementsChange: (equipements) => updateField('equipements', equipements),
                            onSousTraitantsChange: (sousTraitants) => updateField('sousTraitants', sousTraitants),
                            personnel,
                            equipements,
                            sousTraitants,
                            dateDebut: formData.dateDebut,
                            dateFin: formData.dateFin,
                            jobs: jobs.filter(j => j.id !== job?.id), // Exclure le job actuel
                            currentJobId: job?.id
                        })
                    ),

                    // Boutons d'action
                    React.createElement('div', { className: "flex justify-between pt-6 border-t" },
                        React.createElement('div', { className: "flex gap-2" },
                            job && React.createElement('button', {
                                type: "button",
                                onClick: () => {
                                    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce job ?')) {
                                        onDelete(job.id);
                                        addNotification('Job supprimé avec succès', 'success');
                                        onClose();
                                    }
                                },
                                className: "flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"
                            },
                                React.createElement(Icon, { name: 'trash', size: 16 }),
                                "Supprimer"
                            ),
                            job && React.createElement('button', {
                                type: "button",
                                onClick: copyJob,
                                className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                            },
                                React.createElement(Icon, { name: 'copy', size: 16 }),
                                "Copier"
                            )
                        ),
                        React.createElement('div', { className: "flex gap-3" },
                            React.createElement('button', {
                                type: "button",
                                onClick: onClose,
                                className: "px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
                            }, "Annuler"),
                            React.createElement('button', {
                                type: "submit",
                                className: "flex items-center gap-2 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                            },
                                React.createElement(Icon, { name: 'save', size: 16 }),
                                job ? (modificationMode === 'individuel' ? "Créer copie" : "Modifier") : "Créer"
                            )
                        )
                    )
                )
            );
        };

        // ============== COMPOSANT NAVIGATEUR DE DATE ==============
        
        const DateNavigator = ({ currentDate, onDateChange, onClose }) => {
            const [selectedYear, setSelectedYear] = useState(currentDate.getFullYear());
            const [selectedMonth, setSelectedMonth] = useState(currentDate.getMonth());

            const months = [
                'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin',
                'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'
            ];

            const currentYear = new Date().getFullYear();
            const years = Array.from({ length: 10 }, (_, i) => currentYear - 2 + i);

            const handleGoToDate = () => {
                const newDate = new Date(selectedYear, selectedMonth, 1);
                onDateChange(newDate);
                onClose();
            };

            return React.createElement('div', { className: "bg-white border rounded-lg shadow-lg p-4 w-72" },
                React.createElement('div', { className: "flex items-center justify-between mb-4" },
                    React.createElement('h3', { className: "font-semibold" }, "Aller à une date"),
                    React.createElement('button', {
                        onClick: onClose,
                        className: "p-1 hover:bg-gray-100 rounded"
                    }, React.createElement(Icon, { name: 'x', size: 16 }))
                ),

                React.createElement('div', { className: "space-y-4" },
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Année"),
                        React.createElement('select', {
                            value: selectedYear,
                            onChange: (e) => setSelectedYear(parseInt(e.target.value)),
                            className: "w-full p-2 border rounded-lg"
                        },
                            ...years.map(year => 
                                React.createElement('option', { key: year, value: year }, year)
                            )
                        )
                    ),

                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Mois"),
                        React.createElement('div', { className: "grid grid-cols-3 gap-2" },
                            ...months.map((month, index) => 
                                React.createElement('button', {
                                    key: index,
                                    onClick: () => setSelectedMonth(index),
                                    className: `p-2 text-sm border rounded-lg transition-colors ${
                                        selectedMonth === index ? 
                                        'bg-blue-500 text-white border-blue-500' : 
                                        'hover:bg-gray-50'
                                    }`
                                }, month.substr(0, 3))
                            )
                        )
                    ),

                    React.createElement('div', { className: "flex gap-2 pt-2" },
                        React.createElement('button', {
                            onClick: onClose,
                            className: "flex-1 px-3 py-2 border rounded-lg hover:bg-gray-50"
                        }, "Annuler"),
                        React.createElement('button', {
                            onClick: handleGoToDate,
                            className: "flex-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                        }, "Aller")
                    )
                )
            );
        };

        // ============== MODAL GESTION RESSOURCES ==============
        
        const ResourceManagementModal = ({ 
            isOpen, 
            onClose, 
            personnel, 
            setPersonnel, 
            equipements, 
            setEquipements,
            addNotification 
        }) => {
            const [activeTab, setActiveTab] = useState('personnel');
            const [showPersonnelModal, setShowPersonnelModal] = useState(false);
            const [showEquipementModal, setShowEquipementModal] = useState(false);
            const [editingPersonnel, setEditingPersonnel] = useState(null);
            const [editingEquipement, setEditingEquipement] = useState(null);

            const handleSavePersonnel = (personData) => {
                if (editingPersonnel) {
                    setPersonnel(personnel.map(p => p.id === editingPersonnel.id ? personData : p));
                    addNotification('Personnel modifié avec succès', 'success');
                } else {
                    setPersonnel([...personnel, personData]);
                    addNotification('Personnel ajouté avec succès', 'success');
                }
                setEditingPersonnel(null);
            };

            const handleDeletePersonnel = (id) => {
                if (window.confirm('Êtes-vous sûr de vouloir supprimer ce personnel ?')) {
                    setPersonnel(personnel.filter(p => p.id !== id));
                    addNotification('Personnel supprimé avec succès', 'success');
                }
            };

            const handleSaveEquipement = (equipData) => {
                if (editingEquipement) {
                    setEquipements(equipements.map(e => e.id === editingEquipement.id ? equipData : e));
                    addNotification('Équipement modifié avec succès', 'success');
                } else {
                    setEquipements([...equipements, equipData]);
                    addNotification('Équipement ajouté avec succès', 'success');
                }
                setEditingEquipement(null);
            };

            const handleDeleteEquipement = (id) => {
                if (window.confirm('Êtes-vous sûr de vouloir supprimer cet équipement ?')) {
                    setEquipements(equipements.filter(e => e.id !== id));
                    addNotification('Équipement supprimé avec succès', 'success');
                }
            };

            return React.createElement(Modal, {
                isOpen,
                onClose,
                title: 'Gestion des Ressources',
                size: 'xl'
            },
                React.createElement('div', { className: "p-6" },
                    // Tabs
                    React.createElement('div', { className: "flex border-b mb-6" },
                        React.createElement('button', {
                            onClick: () => setActiveTab('personnel'),
                            className: `px-4 py-2 font-medium ${activeTab === 'personnel' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-600'}`
                        }, "Personnel"),
                        React.createElement('button', {
                            onClick: () => setActiveTab('equipements'),
                            className: `px-4 py-2 font-medium ${activeTab === 'equipements' ? 'border-b-2 border-blue-500 text-blue-600' : 'text-gray-600'}`
                        }, "Équipements")
                    ),

                    // Personnel Tab
                    activeTab === 'personnel' && React.createElement('div', null,
                        React.createElement('div', { className: "flex justify-between items-center mb-4" },
                            React.createElement('h3', { className: "text-lg font-semibold" }, `Personnel (${personnel.length})`),
                            React.createElement('button', {
                                onClick: () => {
                                    setEditingPersonnel(null);
                                    setShowPersonnelModal(true);
                                },
                                className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                            },
                                React.createElement(Icon, { name: 'userPlus', size: 16 }),
                                "Ajouter"
                            )
                        ),
                        React.createElement('div', { className: "space-y-2 max-h-96 overflow-y-auto" },
                            ...personnel.map(person => 
                                React.createElement('div', {
                                    key: person.id,
                                    className: "flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"
                                },
                                    React.createElement('div', { className: "flex-1" },
                                        React.createElement('div', { className: "font-medium" }, person.nom),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, `${person.poste} - ${person.succursale}`),
                                        React.createElement('div', { className: "text-xs text-gray-500" }, `${person.email} • ${person.telephone}`)
                                    ),
                                    React.createElement('div', { className: "flex items-center gap-2" },
                                        React.createElement('div', {
                                            className: `px-2 py-1 rounded text-xs ${person.disponible ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`
                                        }, person.disponible ? 'Disponible' : 'Occupé'),
                                        React.createElement('button', {
                                            onClick: () => {
                                                setEditingPersonnel(person);
                                                setShowPersonnelModal(true);
                                            },
                                            className: "p-1 hover:bg-blue-100 rounded"
                                        }, React.createElement(Icon, { name: 'edit', size: 16 })),
                                        React.createElement('button', {
                                            onClick: () => handleDeletePersonnel(person.id),
                                            className: "p-1 hover:bg-red-100 rounded text-red-600"
                                        }, React.createElement(Icon, { name: 'trash', size: 16 }))
                                    )
                                )
                            )
                        )
                    ),

                    // Équipements Tab
                    activeTab === 'equipements' && React.createElement('div', null,
                        React.createElement('div', { className: "flex justify-between items-center mb-4" },
                            React.createElement('h3', { className: "text-lg font-semibold" }, `Équipements (${equipements.length})`),
                            React.createElement('button', {
                                onClick: () => {
                                    setEditingEquipement(null);
                                    setShowEquipementModal(true);
                                },
                                className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                            },
                                React.createElement(Icon, { name: 'plus', size: 16 }),
                                "Ajouter"
                            )
                        ),
                        React.createElement('div', { className: "space-y-2 max-h-96 overflow-y-auto" },
                            ...equipements.map(equipement => 
                                React.createElement('div', {
                                    key: equipement.id,
                                    className: "flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"
                                },
                                    React.createElement('div', { className: "flex-1" },
                                        React.createElement('div', { className: "font-medium" }, equipement.nom),
                                        React.createElement('div', { className: "text-sm text-gray-600" }, `${equipement.type} - ${equipement.succursale}`),
                                        React.createElement('div', { className: "text-xs text-gray-500" }, `Série: ${equipement.numeroSerie} • Maintenance: ${equipement.derniereMaintenance}`)
                                    ),
                                    React.createElement('div', { className: "flex items-center gap-2" },
                                        React.createElement('div', {
                                            className: `px-2 py-1 rounded text-xs ${equipement.disponible ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`
                                        }, equipement.disponible ? 'Disponible' : 'En utilisation'),
                                        React.createElement('button', {
                                            onClick: () => {
                                                setEditingEquipement(equipement);
                                                setShowEquipementModal(true);
                                            },
                                            className: "p-1 hover:bg-blue-100 rounded"
                                        }, React.createElement(Icon, { name: 'edit', size: 16 })),
                                        React.createElement('button', {
                                            onClick: () => handleDeleteEquipement(equipement.id),
                                            className: "p-1 hover:bg-red-100 rounded text-red-600"
                                        }, React.createElement(Icon, { name: 'trash', size: 16 }))
                                    )
                                )
                            )
                        )
                    )
                ),

                // Modals intégrées
                React.createElement(PersonnelModal, {
                    isOpen: showPersonnelModal,
                    onClose: () => setShowPersonnelModal(false),
                    onSave: handleSavePersonnel,
                    personnel: editingPersonnel
                }),

                React.createElement(EquipementModal, {
                    isOpen: showEquipementModal,
                    onClose: () => setShowEquipementModal(false),
                    onSave: handleSaveEquipement,
                    equipement: editingEquipement
                })
            );
        };

        // ============== COMPOSANT PRINCIPAL ==============
        
        const PlanificateurComplet = () => {
            const {
                jobs, setJobs,
                personnel, setPersonnel,
                equipements, setEquipements,
                sousTraitants, setSousTraitants
            } = useAppData();

            const { isMobile, isTablet } = useScreenSize();
            const { notifications, addNotification } = useNotifications();
            
            const [showJobModal, setShowJobModal] = useState(false);
            const [showResourceModal, setShowResourceModal] = useState(false);
            const [selectedJob, setSelectedJob] = useState(null);
            const [selectedCell, setSelectedCell] = useState(null);
            const [startDate, setStartDate] = useState(new Date(2025, 8, 1));
            const [numberOfDays, setNumberOfDays] = useState(isMobile ? 14 : 30);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterPoste, setFilterPoste] = useState('tous');
            const [showDateNavigator, setShowDateNavigator] = useState(false);

            // Générer les jours
            const generateContinuousDays = useCallback(() => {
                const days = [];
                const current = new Date(startDate);
                
                for (let i = 0; i < numberOfDays; i++) {
                    days.push({
                        date: new Date(current),
                        dayNumber: current.getDate(),
                        dayName: current.toLocaleDateString('fr-FR', { weekday: 'short' }).toUpperCase(),
                        monthName: current.toLocaleDateString('fr-FR', { month: 'short' }),
                        isWeekend: current.getDay() === 0 || current.getDay() === 6,
                        isToday: current.toDateString() === new Date().toDateString(),
                        dateString: current.toISOString().split('T')[0]
                    });
                    current.setDate(current.getDate() + 1);
                }
                
                return days;
            }, [startDate, numberOfDays]);

            const continuousDays = generateContinuousDays();

            // Filtrer le personnel
            const filteredPersonnel = useMemo(() => {
                return personnel.filter(person => {
                    const matchesSearch = person.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                         person.poste.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                         person.succursale.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesFilter = filterPoste === 'tous' || person.poste.includes(filterPoste);
                    return matchesSearch && matchesFilter;
                });
            }, [personnel, searchTerm, filterPoste]);

            // Obtenir job pour cellule
            const getJobForCell = (personnelId, day) => {
                return jobs.find(job => 
                    job.personnel?.includes(personnelId) && 
                    day.dateString >= job.dateDebut && 
                    day.dateString <= job.dateFin
                );
            };

            // Générer numéro de job
            const generateJobNumber = useCallback(() => {
                const year = new Date().getFullYear();
                const month = String(new Date().getMonth() + 1).padStart(2, '0');
                const existingNumbers = jobs
                    .filter(j => j.numeroJob?.startsWith(`G${year.toString().slice(-2)}-${month}`))
                    .map(j => parseInt(j.numeroJob.split('-')[1]) || 0);
                const nextNumber = Math.max(0, ...existingNumbers) + 1;
                return `G${year.toString().slice(-2)}-${month}${String(nextNumber).padStart(2, '0')}`;
            }, [jobs]);

            // Gestionnaires d'événements
            const handleCellClick = (personnelId, day) => {
                const existingJob = getJobForCell(personnelId, day);
                
                if (existingJob) {
                    setSelectedJob(existingJob);
                } else {
                    setSelectedJob(null);
                    setSelectedCell({ personnelId, date: day.dateString });
                }
                setShowJobModal(true);
            };

            const handleSaveJob = (jobData) => {
                if (selectedJob) {
                    setJobs(jobs.map(j => j.id === selectedJob.id ? jobData : j));
                } else {
                    setJobs([...jobs, jobData]);
                }
                setSelectedJob(null);
                setSelectedCell(null);
            };

            const handleDeleteJob = (jobId) => {
                setJobs(jobs.filter(j => j.id !== jobId));
            };

            const getPriorityColor = (priorite) => {
                switch (priorite) {
                    case 'urgent': return 'bg-red-500 border-red-600 text-white';
                    case 'haute': return 'bg-orange-500 border-orange-600 text-white';
                    case 'normale': return 'bg-blue-500 border-blue-600 text-white';
                    case 'faible': return 'bg-gray-500 border-gray-600 text-white';
                    default: return 'bg-blue-500 border-blue-600 text-white';
                }
            };

            // Navigation
            const navigateWeeks = (direction) => {
                const newDate = new Date(startDate);
                newDate.setDate(newDate.getDate() + (direction * 7));
                setStartDate(newDate);
            };

            const navigateMonths = (direction) => {
                const newDate = new Date(startDate);
                newDate.setMonth(newDate.getMonth() + direction);
                setStartDate(newDate);
            };

            const goToToday = () => {
                setStartDate(new Date());
            };

            // Export des données
            const exportData = () => {
                const data = {
                    jobs,
                    personnel,
                    equipements,
                    sousTraitants,
                    exportDate: new Date().toISOString(),
                    version: '3.0'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `planificateur-complet-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                addNotification('Données exportées avec succès', 'success');
            };

            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                // Notifications
                React.createElement(NotificationContainer, { notifications }),

                // Header
                React.createElement('div', { className: "bg-white shadow-sm border-b" },
                    React.createElement('div', { className: "px-4 py-4" },
                        React.createElement('div', { className: "flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4" },
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex items-center gap-2" },
                                    React.createElement('h1', { className: "text-xl lg:text-3xl font-bold text-gray-900" }, 
                                        isMobile ? "Planificateur" : "Planificateur Job d'Huile"
                                    ),
                                    React.createElement('span', { 
                                        className: `px-2 py-1 text-xs rounded-full ${
                                            isMobile ? 'bg-blue-100 text-blue-800' : 
                                            isTablet ? 'bg-green-100 text-green-800' : 
                                            'bg-purple-100 text-purple-800'
                                        }` 
                                    }, isMobile ? 'Mobile' : isTablet ? 'Tablette' : 'Desktop')
                                ),
                                React.createElement('p', { className: "text-xs lg:text-sm text-gray-600 mt-1" }, 
                                    `${jobs.length} job${jobs.length !== 1 ? 's' : ''} • ${personnel.length} technicien${personnel.length !== 1 ? 's' : ''} • ${equipements.length} équipement${equipements.length !== 1 ? 's' : ''}`
                                )
                            ),
                            
                            // Actions
                            React.createElement('div', { className: "flex flex-wrap gap-2" },
                                React.createElement('button', {
                                    onClick: () => {
                                        setSelectedJob(null);
                                        setSelectedCell(null);
                                        setShowJobModal(true);
                                    },
                                    className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600"
                                },
                                    React.createElement(Icon, { name: 'plus', size: 16 }),
                                    React.createElement('span', { className: "hidden sm:inline" }, "Nouveau Job")
                                ),
                                React.createElement('button', {
                                    onClick: () => setShowResourceModal(true),
                                    className: "flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                                },
                                    React.createElement(Icon, { name: 'settings', size: 16 }),
                                    React.createElement('span', { className: "hidden sm:inline" }, "Ressources")
                                ),
                                !isMobile && React.createElement('button', {
                                    onClick: exportData,
                                    className: "flex items-center gap-2 px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600"
                                },
                                    React.createElement(Icon, { name: 'download', size: 16 }),
                                    React.createElement('span', { className: "hidden lg:inline" }, "Export")
                                )
                            )
                        ),

                        // Navigation et recherche
                        React.createElement('div', { className: "flex flex-col lg:flex-row gap-4 mt-4" },
                            // Recherche et filtres
                            React.createElement('div', { className: "flex flex-1 gap-2" },
                                React.createElement('div', { className: "relative flex-1 max-w-md" },
                                    React.createElement(Icon, { 
                                        name: 'search', 
                                        size: 18, 
                                        className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" 
                                    }),
                                    React.createElement('input', {
                                        type: "text",
                                        placeholder: "Rechercher...",
                                        value: searchTerm,
                                        onChange: (e) => setSearchTerm(e.target.value),
                                        className: "w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                    })
                                ),
                                React.createElement('select', {
                                    value: filterPoste,
                                    onChange: (e) => setFilterPoste(e.target.value),
                                    className: "px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                },
                                    React.createElement('option', { value: "tous" }, "Tous"),
                                    React.createElement('option', { value: "TECH" }, "TECH"),
                                    React.createElement('option', { value: "ING" }, "ING"),
                                    React.createElement('option', { value: "COORD" }, "COORD"),
                                    React.createElement('option', { value: "ADMIN" }, "ADMIN")
                                )
                            ),

                            // Navigation temporelle
                            React.createElement('div', { className: "flex items-center gap-2" },
                                React.createElement('button', {
                                    onClick: () => navigateMonths(-1),
                                    className: "p-2 hover:bg-gray-100 rounded-lg",
                                    title: "Mois précédent"
                                }, React.createElement(Icon, { name: 'chevronLeft', size: 20 })),
                                React.createElement('button', {
                                    onClick: () => navigateWeeks(-1),
                                    className: "px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded"
                                }, "←"),
                                React.createElement('button', {
                                    onClick: goToToday,
                                    className: "px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded text-blue-600"
                                }, "Aujourd'hui"),
                                React.createElement('div', { className: "relative" },
                                    React.createElement('button', {
                                        onClick: () => setShowDateNavigator(!showDateNavigator),
                                        className: "px-3 py-1 text-sm font-semibold bg-gray-100 hover:bg-gray-200 rounded cursor-pointer",
                                        title: "Cliquer pour aller à une date précise"
                                    }, startDate.toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' })),
                                    showDateNavigator && React.createElement('div', { 
                                        className: "absolute top-full mt-2 z-50" 
                                    },
                                        React.createElement(DateNavigator, {
                                            currentDate: startDate,
                                            onDateChange: setStartDate,
                                            onClose: () => setShowDateNavigator(false)
                                        })
                                    )
                                ),
                                React.createElement('button', {
                                    onClick: () => navigateWeeks(1),
                                    className: "px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded"
                                }, "→"),
                                React.createElement('button', {
                                    onClick: () => navigateMonths(1),
                                    className: "p-2 hover:bg-gray-100 rounded-lg",
                                    title: "Mois suivant"
                                }, React.createElement(Icon, { name: 'chevronRight', size: 20 })),
                                React.createElement('select', {
                                    value: numberOfDays,
                                    onChange: (e) => setNumberOfDays(parseInt(e.target.value)),
                                    className: "px-2 py-1 text-sm border rounded-lg"
                                },
                                    React.createElement('option', { value: 14 }, "2S"),
                                    React.createElement('option', { value: 21 }, "3S"),
                                    React.createElement('option', { value: 30 }, "1M"),
                                    React.createElement('option', { value: 60 }, "2M"),
                                    React.createElement('option', { value: 90 }, "3M")
                                )
                            )
                        )
                    )
                ),

                // Calendrier principal
                React.createElement('div', { className: "p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg shadow-sm overflow-hidden" },
                        React.createElement('div', { className: "overflow-x-auto" },
                            React.createElement('table', { className: "w-full min-w-max" },
                                React.createElement('thead', { className: "bg-gray-50 sticky top-0" },
                                    // En-tête avec mois
                                    React.createElement('tr', null,
                                        React.createElement('th', { 
                                            className: `px-3 py-2 text-left font-semibold text-gray-700 sticky left-0 bg-gray-50 z-20 border-r ${isMobile ? 'min-w-[120px]' : 'min-w-[160px]'}` 
                                        }, isMobile ? "Tech." : "Technicien"),
                                        !isMobile && React.createElement('th', { 
                                            className: "px-2 py-2 text-left font-semibold text-gray-700 sticky left-[160px] bg-gray-50 z-20 border-r w-20" 
                                        }, "Poste"),
                                        ...continuousDays.map((day, index) => {
                                            const showMonth = index === 0 || day.date.getDate() === 1;
                                            return React.createElement('th', {
                                                key: index,
                                                className: `px-1 py-2 text-center font-semibold text-gray-700 ${isMobile ? 'w-10' : 'w-16'} border-r ${day.isWeekend ? 'bg-gray-100' : ''}`
                                            }, showMonth && React.createElement('div', { 
                                                className: "text-xs text-gray-500 font-normal" 
                                            }, isMobile ? day.monthName.substr(0, 3) : day.monthName));
                                        })
                                    ),
                                    
                                    // En-tête avec jours
                                    React.createElement('tr', null,
                                        React.createElement('th', { className: `px-3 py-2 sticky left-0 bg-gray-50 z-20 border-r ${isMobile ? 'w-[120px]' : 'w-[160px]'}` }),
                                        !isMobile && React.createElement('th', { className: "px-2 py-2 sticky left-[160px] bg-gray-50 z-20 border-r" }),
                                        ...continuousDays.map((day, index) => 
                                            React.createElement('th', {
                                                key: index,
                                                className: `px-1 py-2 text-center text-xs border-r ${day.isWeekend ? 'bg-gray-100' : 'bg-gray-50'} ${day.isToday ? 'bg-blue-100 text-blue-600 font-bold' : 'text-gray-600'}`
                                            },
                                                React.createElement('div', { className: "font-medium" }, 
                                                    isMobile ? day.dayName.substr(0, 1) : day.dayName
                                                ),
                                                React.createElement('div', { 
                                                    className: `${isMobile ? 'text-xs' : 'text-sm'} ${day.isToday ? 'font-bold' : ''}` 
                                                }, day.dayNumber)
                                            )
                                        )
                                    )
                                ),
                                
                                React.createElement('tbody', null,
                                    ...filteredPersonnel.map((person) => 
                                        React.createElement('tr', {
                                            key: person.id,
                                            className: "border-b hover:bg-gray-50"
                                        },
                                            React.createElement('td', { 
                                                className: `px-3 py-3 font-medium sticky left-0 bg-white z-10 border-r ${isMobile ? 'w-[120px]' : 'w-[160px]'}` 
                                            },
                                                React.createElement('div', { className: `${isMobile ? 'text-xs' : 'text-sm'} font-semibold` }, 
                                                    isMobile ? person.nom.split(' ')[0] : person.nom
                                                ),
                                                React.createElement('div', { className: "text-xs text-gray-500" }, 
                                                    isMobile ? person.poste : person.succursale
                                                )
                                            ),
                                            !isMobile && React.createElement('td', { 
                                                className: "px-2 py-3 text-xs sticky left-[160px] bg-white z-10 border-r" 
                                            }, person.poste),
                                            ...continuousDays.map((day, dayIndex) => {
                                                const job = getJobForCell(person.id, day);
                                                return React.createElement('td', {
                                                    key: dayIndex,
                                                    className: `px-1 py-1 border-r cursor-pointer hover:bg-blue-50 transition-colors relative ${isMobile ? 'h-12' : 'h-10'} ${day.isWeekend ? 'bg-gray-50' : 'bg-white'}`,
                                                    onClick: () => handleCellClick(person.id, day)
                                                },
                                                    job ? React.createElement('div', {
                                                        className: `w-full h-full flex items-center justify-center text-xs rounded border ${getPriorityColor(job.priorite)}`,
                                                        title: `${job.numeroJob} - ${job.nom}\nClient: ${job.client || 'N/A'}\nDu ${job.dateDebut} au ${job.dateFin || job.dateDebut}`
                                                    },
                                                        React.createElement('div', { className: "text-center truncate px-1" },
                                                            React.createElement('div', { className: `font-medium ${isMobile ? 'text-[9px]' : 'text-[10px]'}` }, `#${job.numeroJob}`),
                                                            React.createElement('div', { className: `truncate ${isMobile ? 'text-[8px]' : 'text-[9px]'}` }, 
                                                                isMobile && job.nom.length > 8 ? job.nom.substring(0, 8) + '...' : job.nom
                                                            )
                                                        )
                                                    ) : React.createElement('div', {
                                                        className: "w-full h-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"
                                                    }, React.createElement(Icon, { name: 'plus', size: isMobile ? 8 : 10, className: "text-gray-400" }))
                                                );
                                            })
                                        )
                                    )
                                )
                            )
                        )
                    )
                ),

                // Modals
                React.createElement(JobModal, {
                    isOpen: showJobModal,
                    onClose: () => {
                        setShowJobModal(false);
                        setSelectedJob(null);
                        setSelectedCell(null);
                    },
                    job: selectedJob,
                    onSave: handleSaveJob,
                    onDelete: handleDeleteJob,
                    personnel,
                    equipements,
                    sousTraitants,
                    jobs,
                    selectedCell,
                    addNotification
                }),

                React.createElement(ResourceManagementModal, {
                    isOpen: showResourceModal,
                    onClose: () => setShowResourceModal(false),
                    personnel,
                    setPersonnel,
                    equipements,
                    setEquipements,
                    addNotification
                })
            );
        };

        // Rendu de l'application
        ReactDOM.render(React.createElement(PlanificateurComplet), document.getElementById('root'));
    </script>
</body>
</html>